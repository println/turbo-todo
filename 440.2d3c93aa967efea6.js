"use strict";(self.webpackChunkturbo_todo=self.webpackChunkturbo_todo||[]).push([[440],{3440:(ot,Z,K)=>{K.d(Z,{e:()=>R});var S=K(1331),v=K(5890),k=K(3994),x=(()=>{return(d=x||(x={})).CATEGORY="CATEGORY",d.GROUP="GROUP",d.TASK="TASK",x;var d})(),F=K(4004);const J={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let B;const L=new Uint8Array(16);function G(){if(!B&&(B=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!B))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(L)}const P=[];for(let d=0;d<256;++d)P.push((d+256).toString(16).slice(1));const g=function _(d,c,p){if(J.randomUUID&&!c&&!d)return J.randomUUID();const A=(d=d||{}).random||(d.rng||G)();if(A[6]=15&A[6]|64,A[8]=63&A[8]|128,c){p=p||0;for(let C=0;C<16;++C)c[p+C]=A[C];return c}return function q(d,c=0){return(P[d[c+0]]+P[d[c+1]]+P[d[c+2]]+P[d[c+3]]+"-"+P[d[c+4]]+P[d[c+5]]+"-"+P[d[c+6]]+P[d[c+7]]+"-"+P[d[c+8]]+P[d[c+9]]+"-"+P[d[c+10]]+P[d[c+11]]+P[d[c+12]]+P[d[c+13]]+P[d[c+14]]+P[d[c+15]]).toLowerCase()}(A)};var E;!function(d){let c,p;!function(A){function Q(W){return(0,v._L)(W,{ref:v.LN})}A.on=function C(W){return(0,v.g3)({id:W,active:!0},{ref:v.LN})},A.off=function N(W){return Q([W])},A.setActive=function et(W,nt){return(0,v.jB)([W],{active:nt},{ref:v.LN})},A.offAll=Q}(c=d.Reducers||(d.Reducers={})),(p=d.Functions||(d.Functions={})).isActive=function C(N,et){let Q=et.getValue().UIEntities[N];return!!Q&&Q.active}}(E||(E={}));var U=K(1571);const m=(0,S.MT)({name:"task"},(0,v.h4)(),(0,v.KN)());(0,k.xi)(m,{key:"task-data",storage:k.n4});class R{constructor(){this.uiStates$=m.pipe((0,v.OR)({ref:v.LN})),this.category$=m.pipe((0,v.dQ)(c=>c.type===x.CATEGORY)),this.group$=m.pipe((0,v.dQ)(c=>c.type===x.GROUP)),this.task$=m.pipe((0,v.dQ)(c=>c.type===x.TASK)),this.categoryItems$=m.combine({entities:this.category$,UIEntities:this.uiStates$}).pipe((0,v.yh)()),this.groupItems$=m.combine({entities:this.group$,UIEntities:this.uiStates$}).pipe((0,v.yh)()),this.taskItems$=m.combine({entities:this.task$,UIEntities:this.uiStates$}).pipe((0,v.yh)()),this.activeTasks$=this.taskItems$.pipe((0,F.U)(c=>c.filter(p=>p.active)))}addCategory(c){this.addItem(c,x.CATEGORY)}addGroup(c,p){this.addItem(c,x.GROUP,p)}addTask(c,p){this.addItem(c,x.TASK,p)}updateItem(c,p){m.update((0,v.jB)([c],A=>({...A,name:p})))}removeItem(c){if(E.Functions.isActive(c,m))return;let p=this.getValue().entities[c];m.update((0,v._L)(c)),p.parent&&m.update(E.Reducers.setActive(p.parent,this.hasChild(p.parent)))}doneTask(c){m.update(E.Reducers.on(c))}undoneTask(c){m.update(E.Reducers.off(c))}releaseAllTasks(){let c=this.getActiveItemIds(x.TASK);m.update(E.Reducers.offAll(c))}addItem(c,p,A){const C={id:g(),name:c,type:p,parent:A};m.update((0,v.dP)(C)),A&&m.update(E.Reducers.on(A))}hasChild(c){return this.getItems().some(p=>p.parent==c)}getActiveItemIds(c){return this.getActiveItems(c).map(p=>p.id)}getActiveItems(c){let p=this.getValue().UIIds;return this.getItems(c).filter(A=>p.includes(A.id))}getItems(c){let p=Object.values(this.getValue().entities);return c?p.filter(A=>A.type==c):p}getValue(){return m.getValue()}}R.\u0275fac=function(c){return new(c||R)},R.\u0275prov=U.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})},5890:(ot,Z,K)=>{K.d(Z,{KN:()=>_,LN:()=>tt,M3:()=>U,OR:()=>dt,WK:()=>ft,_L:()=>g,dP:()=>m,dQ:()=>pt,g3:()=>ut,h4:()=>q,jB:()=>it,yh:()=>I});var S=K(1331),v=K(9635),k=K(1884),x=K(4004);function F(e,n){const t={},r=[];for(const s of e){const o=s[n];r.push(o),t[o]=s}return{ids:r,asObject:t}}function L(e,n){return e.config[n.idKeyRef]}class G{constructor(n){this.idKeyRef="idKey",this.entitiesKey=n.entitiesKey,this.idsKey=n.idsKey,this.idKeyRef=n.idKeyRef}}function P(e){const n=e?`idKey${(0,S.kC)(e)}`:"idKey",t=new G({entitiesKey:e?`${e}Entities`:"entities",idsKey:e?`${e}Ids`:"ids",idKeyRef:n});return{[`${e}EntitiesRef`]:t,[`with${(0,S.kC)(e)}Entities`]:function r(s){let o={},f=[];const a=s?.idKey||"id";return null!=s&&s.initialValue&&({ids:f,asObject:o}=F(s.initialValue,a)),{props:{[t.entitiesKey]:o,[t.idsKey]:f},config:{[n]:a}}}}}const{withEntities:q,EntitiesRef:l}=P(""),{UIEntitiesRef:tt,withUIEntities:_}=P("UI");function g(e,n={}){return function(t){const{ref:{idsKey:r,entitiesKey:s}=l}=n,o=(0,S.Eq)(e),f=Object.assign({},t[s]),a=t[r].filter(b=>!o.includes(b));for(const b of o)Reflect.deleteProperty(f,b);return Object.assign({},t,{[s]:f,[r]:a})}}function U(e={}){return function(t){const{ref:{idsKey:r,entitiesKey:s}=l}=e;return Object.assign({},t,{[s]:{},[r]:[]})}}function m(e,n={}){return function(t,r){const{prepend:s=!1,ref:o=l}=n,{entitiesKey:f,idsKey:a}=o,b=L(r,o),j=(0,S.Eq)(e);if(!j.length)return t;(0,S.r8)()&&(function R(e,n,t,r){e.forEach(s=>{const o=s[n];if(t[r][o])throw Error(`Entity already exists. ${n} ${o}`)})}(j,b,t,f),function d(e,n){const t=new Set;e.forEach(r=>{const s=r[n];if(t.has(s))throw Error(`Duplicate entity id provided. ${n} ${s}`);t.add(s)})}(j,b));const{ids:w,asObject:V}=F(j,b);return Object.assign({},t,{[f]:Object.assign({},t[f],V),[a]:s?[...w,...t[a]]:[...t[a],...w]})}}function Q(e,n={}){return function(t){const{ref:{entitiesKey:r}=l}=n;return Reflect.has(t[r],e)}}function rt(e,n){return(0,S.mf)(e)?e(n):Object.assign({},n,e)}function it(e,n,t={}){return function(r){const{ref:{entitiesKey:s}=l}=t,o={};for(const f of(0,S.Eq)(e))o[f]=rt(n,r[s][f]);return Object.assign({},r,{[s]:Object.assign({},r[s],o)})}}function ut(e,n={}){return function(t,r){const{prepend:s=!1,ref:o=l}=n,{entitiesKey:f,idsKey:a}=o,b=L(r,o),j={},w=[],V=(0,S.Eq)(e);if(!V.length)return t;for(const z of V){const M=z[b];Q(M,n)(t)?j[M]=Object.assign({},t[f][M],z):(w.push(M),j[M]=z)}const $=w.length?{[a]:s?[...w,...t[a]]:[...t[a],...w]}:{};return Object.assign({},t,$,{[f]:Object.assign({},t[f],j)})}}function X(e){return(0,k.x)((n,t)=>n[e]===t[e])}function ft(e={}){const{ref:{entitiesKey:n,idsKey:t}=l}=e;return(0,v.z)(X(n),(0,x.U)(r=>r[t].map(s=>r[n][s])))}function dt(e={}){const{ref:{entitiesKey:n}=l}=e;return(0,S.Ys)(t=>t[n])}function pt(e,n){const{ref:{entitiesKey:t,idsKey:r}=l,pluck:s}=n||{};return(0,v.z)(X(t),(0,S.Ys)(o=>{const f=[];return o[r].forEach((a,b)=>{const j=o[t][a];e(j,b)&&f.push(function B(e,n){return e&&n?(0,S.mf)(n)?n(e):e[n]:e}(j,s))}),f}),(0,S.it)())}function I(e="id"){return(0,x.U)(n=>n.entities.map(t=>Object.assign({},t,n.UIEntities[t[e]])))}(0,S.U4)("activeId",{initialValue:void 0}),(0,S.v8)("activeIds",{initialValue:[]})},3994:(ot,Z,K)=>{K.d(Z,{n4:()=>P,xi:()=>B});var S=K(9646),v=K(7579),k=K(6063);class x extends v.x{constructor(g=1/0,E=1/0,U=k.l){super(),this._bufferSize=g,this._windowTime=E,this._timestampProvider=U,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=E===1/0,this._bufferSize=Math.max(1,g),this._windowTime=Math.max(1,E)}next(g){const{isStopped:E,_buffer:U,_infiniteTimeWindow:m,_timestampProvider:D,_windowTime:R}=this;E||(U.push(g),!m&&U.push(D.now()+R)),this._trimBuffer(),super.next(g)}_subscribe(g){this._throwIfClosed(),this._trimBuffer();const E=this._innerSubscribe(g),{_infiniteTimeWindow:U,_buffer:m}=this,D=m.slice();for(let R=0;R<D.length&&!g.closed;R+=U?1:2)g.next(D[R]);return this._checkFinalizedStatuses(g),E}_trimBuffer(){const{_bufferSize:g,_timestampProvider:E,_buffer:U,_infiniteTimeWindow:m}=this,D=(m?1:2)*g;if(g<1/0&&D<U.length&&U.splice(0,U.length-D),!m){const R=E.now();let d=0;for(let c=1;c<U.length&&U[c]<=R;c+=2)d=c;d&&U.splice(0,d+1)}}}var F=K(2076),H=K(5684),J=K(3900);function B(_,g){var E;const U={source:p=>p,preStoreInit:p=>p,key:null!=(E=g.key)?E:`${_.name}@store`,runGuard:()=>typeof window<"u"},m=Object.assign({},U,g);if(null==m.runGuard||!m.runGuard())return{initialized$:(0,S.of)(!1),unsubscribe(){}};const{storage:D}=g,R=new x(1),d=(0,F.D)(D.getItem(m.key)).subscribe(p=>{p&&_.update(A=>m.preStoreInit(Object.assign({},A,p))),R.next(!0),R.complete()}),c=m.source(_).pipe((0,H.T)(1),(0,J.w)(p=>D.setItem(m.key,p))).subscribe();return{initialized$:R.asObservable(),unsubscribe(){c.unsubscribe(),d.unsubscribe()}}}function L(_){if(_)return{getItem(g){const E=_.getItem(g);return(0,S.of)(E&&JSON.parse(E))},setItem:(g,E)=>(_.setItem(g,JSON.stringify(E)),(0,S.of)(!0)),removeItem:g=>(_.removeItem(g),(0,S.of)(!0))}}const P=L((()=>{try{if(typeof localStorage<"u")return localStorage}catch{}})());L((()=>{try{if(typeof sessionStorage<"u")return sessionStorage}catch{}})())},1331:(ot,Z,K)=>{K.d(Z,{Eq:()=>C,MT:()=>A,U4:()=>X,Ys:()=>ct,it:()=>ut,kC:()=>W,mf:()=>N,r8:()=>pt,v8:()=>ft,vl:()=>Et});var S=K(1135),v=K(7579),k=K(9751),x=K(9635),F=K(9300),H=K(5698),J=K(4004),B=K(1884);const G=new S.X(!1),P=G.asObservable().pipe((0,F.h)(i=>!i),(0,H.q)(1)),l={};new class tt{registerPreStoreUpdate(u){l.preStoreUpdate=u}registerPreStateInit(u){l.preStateInit=u}};const g=new Map,E=new v.x;E.asObservable();class p extends S.X{constructor(u){super(u.state),this.storeDef=u,this.batchInProgress=!1,this.context={config:this.getConfig()},this.state=this.getInitialState(u.state),this.initialState=this.getValue(),function m(i){g.set(i.name,i),E.next({type:"add",store:i})}(this)}get name(){return this.storeDef.name}getInitialState(u){return l.preStateInit?l.preStateInit(u,this.name):u}getConfig(){return this.storeDef.config}query(u){return u(this.getValue())}update(...u){const O=this.getValue();let y=u.reduce((I,h)=>h(I,this.context),O);l.preStoreUpdate&&(y=l.preStoreUpdate(O,y,this.name)),y!==O&&(this.state=y,G.getValue()?this.batchInProgress||(this.batchInProgress=!0,P.subscribe(()=>{super.next(this.state),this.batchInProgress=!1})):super.next(this.state))}getValue(){return this.state}reset(){this.update(()=>this.initialState)}combine(u){let O=!0;const y={};return new k.y(I=>{for(const[h,T]of Object.entries(u))I.add(T.subscribe(Y=>{y[h]=Y,O=!0}));return this.subscribe({next(){O&&(I.next(y),O=!1)},error(h){I.error(h)},complete(){I.complete()}})})}destroy(){(function D(i){g.delete(i.name),E.next({type:"remove",store:i})})(this),this.reset()}next(u){this.update(()=>u)}error(){}complete(){}}function A(i,...u){const{state:O,config:y}=function L(...i){const u={config:{},state:{}};for(const{config:O,props:y}of i)Object.assign(u.config,O),Object.assign(u.state,y);return u}(...u),{name:I}=i;return new p({name:I,state:O,config:y})}function C(i){return Array.isArray(i)?i:[i]}function N(i){return"function"==typeof i}function W(i){return i.charAt(0).toUpperCase()+i.slice(1)}function nt(i){return"object"==typeof i&&!Array.isArray(i)&&null!==i}function ct(i){return(0,x.z)((0,J.U)(i),(0,B.x)())}function ut(){return(0,B.x)((i,u)=>i===u||i.length===u.length&&!u.some((y,I)=>i[I]!==y))}function X(i,{initialValue:u,config:O}){let y=u;const I=W(i);return{[`with${I}`]:(h=y)=>({props:{[i]:h},config:O}),[`set${I}InitialValue`](h){y=h},[`set${I}`]:h=>function(T){const Y=N(h)?h(T):h;return Y===T[i]?T:Object.assign({},T,{[i]:Y})},[`update${I}`]:h=>function(T){const Y=N(h)?h(T):h;return Y===T[i]?T:Object.assign({},T,{[i]:nt(Y)?Object.assign({},T[i],Y):Y})},[`reset${I}`]:()=>function(h){return Object.assign({},h,{[i]:y})},[`select${I}`]:()=>ct(h=>h[i]),[`get${I}`]:h=>h[i]}}function ft(i,u){const O=W(i),y=X(i,u);return Object.assign({},y,{[`add${O}`]:I=>function(h){return Object.assign({},h,{[i]:dt(h[i],I)})},[`remove${O}`]:I=>function(h){return Object.assign({},h,{[i]:gt(h[i],I)})},[`toggle${O}`]:I=>function(h){return Object.assign({},h,{[i]:at(h[i],I)})},[`update${O}`]:(I,h)=>function(T){return Object.assign({},T,{[i]:mt(T[i],I,h)})},[`in${O}`]:I=>h=>function st(i,u){return i.includes(u)}(h[i],I)})}function dt(i,u){return[...i,...C(u)]}function gt(i,u){const O=C(u);return i.filter(y=>!O.includes(y))}function at(i,u){const O=C(u),y=[...i];return O.forEach(I=>{const h=y.indexOf(I);h>-1?y.splice(h,1):y.push(I)}),y}function mt(i,u,O){return i.map(y=>y===u?O:y)}function Et(i){return{props:i,config:void 0}}function pt(){return true}}}]);